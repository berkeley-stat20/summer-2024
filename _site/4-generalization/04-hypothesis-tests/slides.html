<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Stat 20 - Hypothesis Testing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WP7F4QKDC8"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-WP7F4QKDC8', { 'anonymize_ip': true});
</script><link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
<script src="../../site_libs/countdown-0.4.0/countdown.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="Stat 20 - Hypothesis Testing">
<meta property="og:description" content="Introduction to Probability and Statistics at UC Berkeley">
<meta property="og:image" content="https://stat20.berkeley.edu/summer-2024/4-generalization/04-hypothesis-tests/assets/stat20-hex.png">
<meta property="og:site_name" content="Stat 20">
<meta name="twitter:title" content="Stat 20 - Hypothesis Testing">
<meta name="twitter:description" content="Introduction to Probability and Statistics at UC Berkeley">
<meta name="twitter:image" content="https://stat20.berkeley.edu/summer-2024/4-generalization/04-hypothesis-tests/assets/stat20-hex.png">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-sm " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/stat20-hex-small.png" alt="Stat 20 logo" class="navbar-logo"></a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../office-hours.html"> 
<span class="menu-text">Office Hours</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes.html"> 
<span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://edstem.org/us/courses/51198" title="" class="quarto-navigation-tool px-1" aria-label="Ed Discussion Forum"><i class="bi bi-chat-fill"></i></a>
    <a href="https://www.gradescope.com/courses/693050" title="" class="quarto-navigation-tool px-1" aria-label="Gradescope"><i class="bi bi-bar-chart-fill"></i></a>
    <a href="https://stat20.datahub.berkeley.edu/" title="" class="quarto-navigation-tool px-1" aria-label="RStudio"><i class="bi bi-r-circle-fill"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#agenda" id="toc-agenda" class="nav-link active" data-scroll-target="#agenda">Agenda</a></li>
  <li>
<a href="#concept-questions" id="toc-concept-questions" class="nav-link" data-scroll-target="#concept-questions">Concept Questions</a>
  <ul class="collapse">
<li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  </ul>
</li>
  <li>
<a href="#problem-set-13" id="toc-problem-set-13" class="nav-link" data-scroll-target="#problem-set-13">Problem Set 13</a>
  <ul class="collapse">
<li><a href="#what-do-you-think" id="toc-what-do-you-think" class="nav-link" data-scroll-target="#what-do-you-think">What do you think?</a></li>
  </ul>
</li>
  <li>
<a href="#problem-set-13-1" id="toc-problem-set-13-1" class="nav-link" data-scroll-target="#problem-set-13-1">Problem Set 13:</a>
  <ul class="collapse">
<li><a href="#what-do-you-think-about-the-of-the-experiment-in-the-video" id="toc-what-do-you-think-about-the-of-the-experiment-in-the-video" class="nav-link" data-scroll-target="#what-do-you-think-about-the-of-the-experiment-in-the-video">What do you think about the of the experiment in the video?</a></li>
  </ul>
</li>
  <li><a href="#problem-set-13-page-1" id="toc-problem-set-13-page-1" class="nav-link" data-scroll-target="#problem-set-13-page-1">Problem Set 13: Page 1</a></li>
  <li><a href="#break" id="toc-break" class="nav-link" data-scroll-target="#break">Break</a></li>
  <li>
<a href="#problem-set-13-page-2" id="toc-problem-set-13-page-2" class="nav-link" data-scroll-target="#problem-set-13-page-2">Problem Set 13: Page 2</a>
  <ul class="collapse">
<li><a href="#do-you-still-think-yawning-is-contagious" id="toc-do-you-still-think-yawning-is-contagious" class="nav-link" data-scroll-target="#do-you-still-think-yawning-is-contagious">Do you still think yawning is contagious?</a></li>
  </ul>
</li>
  </ul><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Hypothesis Testing</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="agenda" class="level2"><h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<ul>
<li>Announcements</li>
<li>Concept Questions</li>
<li>Problem Set 13: Hypothesis Tests? (first page)</li>
<li><em>Break</em></li>
<li>Problem Set 13: Hypothesis Tests? (second page)</li>
</ul>
<!---
:::notes
Pick a Card Activity

Goals:
1. Identify a situation where people naturally reason like a hypothesis test
2. Map the parts of that situation to the formalism of a hypothesis test
3. Provide some intuition about why .05 is used as the standard threshold

Take two decks of cards and mix them so that you have a single deck that is all of one color, say: black. Bring a prize to class and ham it up that the winner of this simple game will win the prize. All they have to do is pick a red card.

Shuffle the deck, say that's its fair, then select a random student to be the first contestant. Fan the cards out for them and have them pick a card. When the lose, fein disappointment / surprise, replace the card and move on to the next student. Do this several times. You'll start hearing groans that the game is rigged. At the point where the groans become clearly articulated (usually around 4 or 5 draws), stop the game, admit to the scam, then go to the board.

Walk through how students started with a previous notion that the deck was fair (null hypothesis: p(red) = .5). As they observed data, they assessed the degree of consistency with that notion by computing the probability of the data. Calculate a table of the binomial probabilities of one black, two blacks, three blacks, on the board. With 4 blacks, the probability is 1/2^4 = .0625 and with 5 blacks its 1/2^5 = .03125. Draw a line between these two probability and identify it as the alpha = .05 threshold that is generally used for "calling bullshit on the null".
:::
--></section><section id="concept-questions" class="level1"><h1>Concept Questions</h1>
<section id="section" class="level2 smaller"><h2 class="smaller anchored" data-anchor-id="section"></h2>
<div class="poll">
<p>Which of the following statements below represents claims that correspond to a null hypothesis (as opposed to an alternative hypothesis)?</p>
<p>Hint: try to write them using parameters (statements about means / proportions / etc)</p>
<p>A. King cheetahs on average run the same speed as standard spotted cheetahs.</p>
<p>B. For a particular student, the probability of correctly answering a 5-option multiple choice test is larger than 0.2 (i.e., better than guessing).</p>
<p>C. The mean length of African elephant tusks has changed over the last 100 years.</p>
<p>D. The risk of facial clefts is equal for babies born to mothers who take folic acid supplements compared with those from mothers who do not.</p>
<p>E. Mean birth weight of newborns is dependent on caffeine intake during pregnancy.</p>
<p>F. The probability of getting in a car accident is the same if using a cell phone than if not using a cell phone.</p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_f9f169a9" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>Correct answers: A, D, F.</p>
<p>Most of these they haven’t seen examples of, so it will be worth laying out the null hypotheses.</p>
</div>
<!---
## 

We want to understand whether blood thinners are helpful or harmful. We’ll consider both of these possibilities using a two-sided hypothesis test.

:::{.smaller}
*Null*: Blood thinners do not have an overall survival effect, i.e., the survival proportions are the same in each group. 

*Alternative*: Blood thinners have an impact on survival, either positive or negative, but not zero.
:::

![](images/two-sided.png){fig-width="400" fig-align="center"}

:::poll
What is your guess at the p-value?
:::



::: {.cell}
::: {.cell-output-display}


```{=html}
<div class="countdown" id="timer_540ecca5" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
```


:::
:::



:::notes
.3 is probably the best answer but .2 is ok too.
:::
-->
</section><section id="section-1" class="level2"><h2 class="anchored" data-anchor-id="section-1"></h2>
<p>A pharmaceutical company developed a new treatment for eczema and performed a hypothesis test to see if it worked better than the company’s old treatment. The P-value for the test was <span class="math inline">\(10\%\)</span>. Which one of the following statements are true?</p>
<p><br></p>
<p>A. The probability that the null hypothesis is false is <span class="math inline">\(10\%\)</span>.</p>
<p>B. The P-value of about <span class="math inline">\(10\%\)</span> was computed assuming that the null hypothesis was true.</p>
<p>C. The new drug is significantly better than the old.</p>
<p>D. The alternative hypothesis is 10 times more likely the null.</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_fa752f73" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section></section><section id="problem-set-13" class="level1"><h1>Problem Set 13</h1>
<ul>
<li>Today’s problem set is all about answering one question:</li>
</ul>
<p>. . .</p>
<blockquote class="blockquote">
<p>Is yawning contagious?</p>
</blockquote>
<section id="what-do-you-think" class="level2"><h2 class="anchored" data-anchor-id="what-do-you-think">What do you think?</h2>
<p>Answer at <code>pollev.com</code>.</p>
</section></section><section id="problem-set-13-1" class="level1"><h1>Problem Set 13:</h1>
<ul>
<li>Now, we will watch a short excerpt from a Mythbusters episode in which the Mythbusters crew sets up, performs and analyzes the results of an experiment designed to test whether yawning is contagious.</li>
</ul>
<section id="what-do-you-think-about-the-of-the-experiment-in-the-video" class="level2"><h2 class="anchored" data-anchor-id="what-do-you-think-about-the-of-the-experiment-in-the-video">What do you think about the of the experiment in the video?</h2>
<ul>
<li>Discuss with your group, identifying anything that seems amiss.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_b7664c40" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">30</span></code>
</div>
</div>
</div>
</section></section><section id="problem-set-13-page-1" class="level1"><h1>Problem Set 13: Page 1</h1>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_38fedcd1" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">20</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section><section id="break" class="level1"><h1>Break</h1>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_687a69de" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section><section id="problem-set-13-page-2" class="level1"><h1>Problem Set 13: Page 2</h1>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_a1a54dd9" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls">
<button class="countdown-bump-down">−</button><button class="countdown-bump-up">&amp;plus;</button>
</div>
<code class="countdown-time"><span class="countdown-digits minutes">20</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<section id="do-you-still-think-yawning-is-contagious" class="level2"><h2 class="anchored" data-anchor-id="do-you-still-think-yawning-is-contagious">Do you still think yawning is contagious?</h2>
<p>Answer at <code>pollev.com</code>.</p>
<!---
# Hypothesis Testing with `infer`


## {background-image="images/pic-5.jpg" background-size="contain"}

## {background-image="images/pic-6.jpg" background-size="contain"}

## {background-image="images/pic-7.jpg" background-size="contain"}

## {background-image="images/pic-8.jpg" background-size="contain"}

## {background-image="images/pic-9.jpg" background-size="contain"}

## {background-image="images/pic-10.jpg" background-size="contain"}

## {background-image="images/pic-11.jpg" background-size="contain"}

## {background-image="images/pic-12.jpg" background-size="contain"}

# Appendix

# Example: Class Survey

## {menu-title="question"}

> Question: Do beach lovers prefer the warm seasons more than mountain lovers?

. . .

Load packages and data.



::: {.cell}

```{.r .cell-code}
library(tidyverse)
library(stat20data)
```
:::



. . .

Create new column with just two levels and drop NAs.



::: {.cell}

```{.r .cell-code}
class_survey <- class_survey %>%
  mutate(warm_fav = season%in% c("Summer", "Fall")) %>%
  drop_na(beach_or_mtns, warm_fav)
```
:::




## Visualizing the data

> What sort of visualization can we use to see the association between these two variables?

. . .

:::columns
:::{.column width="50%"}


::: {.cell}

```{.r .cell-code}
class_survey %>%
  select(beach_or_mtns, warm_fav)
```

::: {.cell-output .cell-output-stdout}

```
# A tibble: 619 × 2
   beach_or_mtns    warm_fav
   <chr>            <lgl>   
 1 At the beach     TRUE    
 2 At the beach     TRUE    
 3 In the mountains FALSE   
 4 At the beach     TRUE    
 5 In the mountains FALSE   
 6 At the beach     TRUE    
 7 In the mountains FALSE   
 8 At the beach     FALSE   
 9 At the beach     FALSE   
10 At the beach     TRUE    
# ℹ 609 more rows
```


:::
:::


:::

:::{.column width="50%" .fragment}


::: {.cell}

```{.r .cell-code}
ggplot(class_survey, aes(x = beach_or_mtns,
                         fill = warm_fav)) +
  geom_bar(position = "fill")
```

::: {.cell-output-display}
![](slides_files/figure-html/unnamed-chunk-11-1.png){width=672}
:::
:::


:::
:::


## Answering with a statistic

> Question: Do beach lovers prefer the warm seasons more than mountain lovers?

. . .



::: {.cell}

```{.r .cell-code}
library(infer)
obs_stat <- class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  calculate(stat = "diff in props")
obs_stat
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
# A tibble: 1 × 1
   stat
  <dbl>
1 0.231
```


:::
:::



. . .

> We see the difference is non-zero, but could that just be a product of this particular small sample of data that we have?


## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,  
          explanatory = beach_or_mtns,  
          success = "TRUE")  
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
# A tibble: 619 × 2
   warm_fav beach_or_mtns   
   <fct>    <fct>           
 1 TRUE     At the beach    
 2 TRUE     At the beach    
 3 FALSE    In the mountains
 4 TRUE     At the beach    
 5 FALSE    In the mountains
 6 TRUE     At the beach    
 7 FALSE    In the mountains
 8 FALSE    At the beach    
 9 FALSE    At the beach    
10 TRUE     At the beach    
# ℹ 609 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence")  
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 619 × 2
   warm_fav beach_or_mtns   
   <fct>    <fct>           
 1 TRUE     At the beach    
 2 TRUE     At the beach    
 3 FALSE    In the mountains
 4 TRUE     At the beach    
 5 FALSE    In the mountains
 6 TRUE     At the beach    
 7 FALSE    In the mountains
 8 FALSE    At the beach    
 9 FALSE    At the beach    
10 TRUE     At the beach    
# ℹ 609 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 1,
           type = "permute")
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 619 × 3
# Groups:   replicate [1]
   warm_fav beach_or_mtns    replicate
   <fct>    <fct>                <int>
 1 FALSE    At the beach             1
 2 TRUE     At the beach             1
 3 FALSE    In the mountains         1
 4 TRUE     At the beach             1
 5 TRUE     In the mountains         1
 6 TRUE     At the beach             1
 7 TRUE     In the mountains         1
 8 TRUE     At the beach             1
 9 TRUE     At the beach             1
10 FALSE    At the beach             1
# ℹ 609 more rows
```


:::
:::





## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 1,
           type = "permute") # a second shuffle
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 619 × 3
# Groups:   replicate [1]
   warm_fav beach_or_mtns    replicate
   <fct>    <fct>                <int>
 1 FALSE    At the beach             1
 2 TRUE     At the beach             1
 3 TRUE     In the mountains         1
 4 TRUE     At the beach             1
 5 TRUE     In the mountains         1
 6 TRUE     At the beach             1
 7 TRUE     In the mountains         1
 8 TRUE     At the beach             1
 9 FALSE    At the beach             1
10 FALSE    At the beach             1
# ℹ 609 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 1,
           type = "permute") # a third shuffle
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 619 × 3
# Groups:   replicate [1]
   warm_fav beach_or_mtns    replicate
   <fct>    <fct>                <int>
 1 FALSE    At the beach             1
 2 FALSE    At the beach             1
 3 FALSE    In the mountains         1
 4 TRUE     At the beach             1
 5 TRUE     In the mountains         1
 6 TRUE     At the beach             1
 7 TRUE     In the mountains         1
 8 TRUE     At the beach             1
 9 FALSE    At the beach             1
10 TRUE     At the beach             1
# ℹ 609 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 500,  
           type = "permute")
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 309,500 × 3
# Groups:   replicate [500]
   warm_fav beach_or_mtns    replicate
   <fct>    <fct>                <int>
 1 FALSE    At the beach             1
 2 FALSE    At the beach             1
 3 FALSE    In the mountains         1
 4 FALSE    At the beach             1
 5 FALSE    In the mountains         1
 6 TRUE     At the beach             1
 7 TRUE     In the mountains         1
 8 TRUE     At the beach             1
 9 FALSE    At the beach             1
10 FALSE    At the beach             1
# ℹ 309,490 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 500,
           type = "permute") %>%
  calculate(stat = "diff in props")  
```

::: {.cell-output .cell-output-stdout}

```
Response: warm_fav (factor)
Explanatory: beach_or_mtns (factor)
Null Hypothesis: independence
# A tibble: 500 × 2
   replicate     stat
       <int>    <dbl>
 1         1  0.0395 
 2         2  0.0111 
 3         3 -0.0174 
 4         4  0.0537 
 5         5  0.0395 
 6         6 -0.0103 
 7         7  0.00394
 8         8 -0.0814 
 9         9  0.0608 
10        10  0.0111 
# ℹ 490 more rows
```


:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 500,
           type = "permute") %>%
  calculate(stat = "diff in props") %>%
  visualize()  
```

::: {.cell-output-display}
![](slides_files/figure-html/unnamed-chunk-20-1.png){width=672}
:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 500,
           type = "permute") %>%
  calculate(stat = "diff in props") %>%
  visualize() +
  shade_pvalue(obs_stat = obs_stat,  
               direction = "both")  
```

::: {.cell-output-display}
![](slides_files/figure-html/unnamed-chunk-21-1.png){width=672}
:::
:::




## Hypothesis Test Pipeline {auto-animate="true"}



::: {.cell}

:::

::: {.cell}

```{.r .cell-code}
class_survey %>%
  specify(response = warm_fav,
          explanatory = beach_or_mtns,
          success = "TRUE") %>%
  hypothesize(null = "independence") %>%
  generate(reps = 500,
           type = "permute") %>%
  calculate(stat = "diff in props") %>%
  get_p_value(obs_stat = obs_stat,  
               direction = "both")  
```

::: {.cell-output .cell-output-stdout}

```
# A tibble: 1 × 1
  p_value
    <dbl>
1       0
```


:::
:::



<!-- ## Your turn -->
<!-- We want to  -->
<!-- Using the `class_survey` data, create a plot of the distribution of thoughts on climate change separated out by whether or not a student is an econ major. Also compute a statistic that  -->


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
    <a class="nav-link" href="../../license.html">
<p>License</p>
</a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>